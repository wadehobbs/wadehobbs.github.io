<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.2.269">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>test</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1.6em;
  vertical-align: middle;
}
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<script src="index_files/libs/clipboard/clipboard.min.js"></script>
<script src="index_files/libs/quarto-html/quarto.js"></script>
<script src="index_files/libs/quarto-html/popper.min.js"></script>
<script src="index_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="index_files/libs/quarto-html/anchor.min.js"></script>
<link href="index_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="index_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="index_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="index_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="index_files/libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">


</head>

<body class="fullcontent">

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">

<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">test</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  

</header>

<p>The goal here is to scrape the procyclingstats site for results data. Results can be scraped for any race level and any year provided by the site.</p>
<p>This uses the polite package to assist in the scrape. As per the website:</p>
<p>“The goal of polite is to promote responsible web etiquette. The package’s two main functions <em>bow</em> and <em>scrape</em> define and realize a web harvesting session. bow is used to introduce the client to the host and ask for permission to scrape (by inquiring against the host’s robots.txt file), while scrape is the main function for retrieving data from the remote server.</p>
<p>The three pillars of a polite session are seeking permission, taking slowly and never asking twice.”</p>
<p>This does mean the scrapes are <em>slow</em> by design. For a worked example see: https://github.com/dmi3kno/polite</p>
<section id="step-1-get-a-list-of-races-you-want-to-scrape" class="level1">
<h1>Step 1: Get a list of races you want to scrape</h1>
<p>This section takes the years you want to scrape and the circuit, and generates a dataframe with the name of the race, the year and the link for the race.</p>
<p>Select the circuit:</p>
<ol type="1">
<li>Men’s World Tour</li>
<li>Men’s World Championships</li>
<li>Men’s Junior</li>
<li>Women’s Elite</li>
<li>Women’s Junior</li>
<li>Women’s World Tour</li>
<li>Europe Tour</li>
<li>Africa Tour</li>
<li>Asia Tour</li>
<li>Oceania Tour</li>
<li>American Tour</li>
<li>UCI Pro Series</li>
<li>National Cup</li>
</ol>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(rvest)</span>
<span id="cb1-3"><a href="#cb1-3" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(magrittr)</span>
<span id="cb1-4"><a href="#cb1-4" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(data.table)</span>
<span id="cb1-5"><a href="#cb1-5" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(polite)</span>
<span id="cb1-6"><a href="#cb1-6" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(xml2)</span>
<span id="cb1-7"><a href="#cb1-7" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(glue)</span>
<span id="cb1-8"><a href="#cb1-8" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(tictoc)</span>
<span id="cb1-9"><a href="#cb1-9" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(janitor)</span>
<span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(lubridate)</span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a><span class="fu">library</span>(Hmisc)</span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb1-13"><a href="#cb1-13" aria-hidden="true" tabindex="-1"></a>race_results_df <span class="ot">&lt;-</span> <span class="fu">readRDS</span>(<span class="st">"race_results_df"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb1-14"><a href="#cb1-14" aria-hidden="true" tabindex="-1"></a>                  <span class="fu">filter</span>(year <span class="sc">&gt;</span> <span class="dv">2020</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
<p>Now we have the results, need to have a look at it. Who had the most wins for the the period?</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb2"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a>race_results_df <span class="sc">%&gt;%</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(rnk <span class="sc">==</span> <span class="dv">1</span>, </span>
<span id="cb2-3"><a href="#cb2-3" aria-hidden="true" tabindex="-1"></a>         year <span class="sc">&gt;</span> <span class="dv">2020</span>) <span class="sc">%&gt;%</span></span>
<span id="cb2-4"><a href="#cb2-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(rider, race_type) <span class="sc">%&gt;%</span></span>
<span id="cb2-5"><a href="#cb2-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">wins =</span> <span class="fu">n</span>()) <span class="sc">%&gt;%</span></span>
<span id="cb2-6"><a href="#cb2-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(rider) <span class="sc">%&gt;%</span></span>
<span id="cb2-7"><a href="#cb2-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">total_wins =</span> <span class="fu">sum</span>(wins)) <span class="sc">%&gt;%</span></span>
<span id="cb2-8"><a href="#cb2-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(total_wins <span class="sc">&gt;</span> <span class="dv">2</span>) <span class="sc">%&gt;%</span></span>
<span id="cb2-9"><a href="#cb2-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> <span class="fu">reorder</span>(rider, total_wins), <span class="at">y =</span> wins, <span class="at">fill =</span> race_type)) <span class="sc">+</span></span>
<span id="cb2-10"><a href="#cb2-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="at">stat =</span> <span class="st">"identity"</span>) <span class="sc">+</span></span>
<span id="cb2-11"><a href="#cb2-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_flip</span>() <span class="sc">+</span></span>
<span id="cb2-12"><a href="#cb2-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">breaks =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">2</span>, <span class="dv">4</span>, <span class="dv">6</span>, <span class="dv">8</span>, <span class="dv">10</span>, <span class="dv">12</span>, <span class="dv">14</span>, <span class="dv">16</span>, <span class="dv">18</span>, <span class="dv">20</span>, <span class="dv">22</span>, <span class="dv">24</span>)) <span class="sc">+</span></span>
<span id="cb2-13"><a href="#cb2-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">""</span>, <span class="at">fill =</span> <span class="st">"Race Type"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="index_files/figure-html/unnamed-chunk-2-1.png" class="img-fluid" width="768"></p>
</div>
</div>
<p>Since the start of the 2021 season Pog has won the most races/stages with 18 followed closely by Van Aert with 16 and Roglic at 11. Does not include overall GC wins. Limited to those with 3 or more wins.</p>
<p>What does it look like if we look at who had the most 2nd places?</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a>race_results_df <span class="sc">%&gt;%</span></span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(rnk <span class="sc">==</span> <span class="dv">2</span>, year <span class="sc">&gt;</span> <span class="dv">2020</span>) <span class="sc">%&gt;%</span></span>
<span id="cb3-3"><a href="#cb3-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(rider, race_type) <span class="sc">%&gt;%</span></span>
<span id="cb3-4"><a href="#cb3-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">second =</span> <span class="fu">n</span>()) <span class="sc">%&gt;%</span></span>
<span id="cb3-5"><a href="#cb3-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(rider) <span class="sc">%&gt;%</span></span>
<span id="cb3-6"><a href="#cb3-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">total_seconds =</span> <span class="fu">sum</span>(second)) <span class="sc">%&gt;%</span></span>
<span id="cb3-7"><a href="#cb3-7" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(total_seconds <span class="sc">&gt;</span> <span class="dv">2</span>) <span class="sc">%&gt;%</span></span>
<span id="cb3-8"><a href="#cb3-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> <span class="fu">reorder</span>(rider, total_seconds), <span class="at">y =</span> second, <span class="at">fill =</span> race_type)) <span class="sc">+</span></span>
<span id="cb3-9"><a href="#cb3-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="at">stat =</span> <span class="st">"identity"</span>) <span class="sc">+</span></span>
<span id="cb3-10"><a href="#cb3-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_flip</span>() <span class="sc">+</span></span>
<span id="cb3-11"><a href="#cb3-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">breaks =</span> <span class="fu">c</span>(<span class="dv">0</span>, <span class="dv">2</span>, <span class="dv">4</span>, <span class="dv">6</span>, <span class="dv">8</span>, <span class="dv">10</span>, <span class="dv">12</span>, <span class="dv">14</span>, <span class="dv">16</span>, <span class="dv">18</span>, <span class="dv">20</span>, <span class="dv">22</span>, <span class="dv">24</span>)) <span class="sc">+</span></span>
<span id="cb3-12"><a href="#cb3-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">""</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="index_files/figure-html/unnamed-chunk-3-1.png" class="img-fluid" width="768"></p>
</div>
</div>
<p>Perhaps unsurprisingly, Van Aert had the most 2nd places with 13 followed closely by Roglic with 12.</p>
<p>Finally, if we highlight monuments and grand tours, who has the most ‘big’ wins. The following graph is ordered by the most total wins, but shows how many were from monuments or grand tours and how many were not.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb4"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a>one_day_race_wins <span class="ot">&lt;-</span> race_results_df <span class="sc">%&gt;%</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(race_type <span class="sc">==</span> <span class="st">"one-day race"</span>, rnk <span class="sc">==</span> <span class="dv">1</span>, year <span class="sc">&gt;</span> <span class="dv">2020</span>) <span class="sc">%&gt;%</span></span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(rider, race_level) <span class="sc">%&gt;%</span></span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">wins =</span> <span class="fu">n</span>()) <span class="sc">%&gt;%</span></span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(rider) <span class="sc">%&gt;%</span></span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">total_wins =</span> <span class="fu">sum</span>(wins)) <span class="sc">%&gt;%</span></span>
<span id="cb4-7"><a href="#cb4-7" aria-hidden="true" tabindex="-1"></a>  <span class="co"># filter(total_wins &gt;2) %&gt;%</span></span>
<span id="cb4-8"><a href="#cb4-8" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> <span class="fu">reorder</span>(rider, total_wins), <span class="at">y =</span> wins, <span class="at">fill =</span> race_level)) <span class="sc">+</span></span>
<span id="cb4-9"><a href="#cb4-9" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_col</span>() <span class="sc">+</span></span>
<span id="cb4-10"><a href="#cb4-10" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_flip</span>() <span class="sc">+</span></span>
<span id="cb4-11"><a href="#cb4-11" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span>race_level) <span class="sc">+</span></span>
<span id="cb4-12"><a href="#cb4-12" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">breaks =</span> <span class="fu">c</span>(<span class="dv">0</span><span class="sc">:</span><span class="dv">20</span>)) <span class="sc">+</span></span>
<span id="cb4-13"><a href="#cb4-13" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">""</span>, <span class="at">title =</span> <span class="st">"One-Day Races"</span>, <span class="at">fill =</span> <span class="st">"Race Level"</span>)</span>
<span id="cb4-14"><a href="#cb4-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-15"><a href="#cb4-15" aria-hidden="true" tabindex="-1"></a>stage_race_wins <span class="ot">&lt;-</span> race_results_df <span class="sc">%&gt;%</span></span>
<span id="cb4-16"><a href="#cb4-16" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(race_type <span class="sc">==</span> <span class="st">"stage race"</span>, rnk <span class="sc">==</span> <span class="dv">1</span>, year <span class="sc">&gt;</span> <span class="dv">2020</span>) <span class="sc">%&gt;%</span></span>
<span id="cb4-17"><a href="#cb4-17" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(rider, race_level) <span class="sc">%&gt;%</span></span>
<span id="cb4-18"><a href="#cb4-18" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">wins =</span> <span class="fu">n</span>()) <span class="sc">%&gt;%</span></span>
<span id="cb4-19"><a href="#cb4-19" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(rider) <span class="sc">%&gt;%</span></span>
<span id="cb4-20"><a href="#cb4-20" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">total_wins =</span> <span class="fu">sum</span>(wins)) <span class="sc">%&gt;%</span></span>
<span id="cb4-21"><a href="#cb4-21" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(total_wins <span class="sc">&gt;</span> <span class="dv">2</span>) <span class="sc">%&gt;%</span></span>
<span id="cb4-22"><a href="#cb4-22" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x =</span> <span class="fu">reorder</span>(rider, total_wins), <span class="at">y =</span> wins, <span class="at">fill =</span> race_level)) <span class="sc">+</span></span>
<span id="cb4-23"><a href="#cb4-23" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_col</span>() <span class="sc">+</span></span>
<span id="cb4-24"><a href="#cb4-24" aria-hidden="true" tabindex="-1"></a>  <span class="fu">coord_flip</span>() <span class="sc">+</span></span>
<span id="cb4-25"><a href="#cb4-25" aria-hidden="true" tabindex="-1"></a>  <span class="fu">facet_wrap</span>(<span class="sc">~</span>race_level) <span class="sc">+</span></span>
<span id="cb4-26"><a href="#cb4-26" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_y_continuous</span>(<span class="at">breaks =</span> <span class="fu">c</span>(<span class="dv">0</span><span class="sc">:</span><span class="dv">20</span>)) <span class="sc">+</span></span>
<span id="cb4-27"><a href="#cb4-27" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">""</span>, <span class="at">title =</span> <span class="st">"Stage Races"</span>, <span class="at">fill =</span> <span class="st">"Race Level"</span>)</span>
<span id="cb4-28"><a href="#cb4-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-29"><a href="#cb4-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-30"><a href="#cb4-30" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-31"><a href="#cb4-31" aria-hidden="true" tabindex="-1"></a>gridExtra<span class="sc">::</span><span class="fu">grid.arrange</span>(stage_race_wins, one_day_race_wins)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output-display">
<p><img src="index_files/figure-html/unnamed-chunk-4-1.png" class="img-fluid" width="960"></p>
</div>
</div>
<p>Looking at One-day races, Van Aert and Pog won the same number (5 wins), but that does not tell the whole story - 3 of Pog’s 5 wins were Monuments while none of Van Aert’s wins were Monuments. For Stage races, looking at the sprinters, both Bennett and Cavendish had 6 wins, of those 5 of Cavendish’s were at Grand Tours while Bennett only had 2 Grand Tour stage wins.</p>
<p>There is a lot more to do in regards to analysis, this document has focused on the data scrape. With that achieved, future posts will be more in-depth analysis of this data.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode r code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a>Hmisc<span class="sc">::</span><span class="fu">describe</span>(race_results_df)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>race_results_df 

 31  Variables      45638  Observations
--------------------------------------------------------------------------------
race 
       n  missing distinct 
   45638        0       32 

lowest : amstel-gold-race   benelux-tour       bretagne-classic   cyclassics-hamburg dauphine          
highest: tour-de-romandie   tour-de-suisse     uae-tour           volta-a-catalunya  vuelta-a-espana   
--------------------------------------------------------------------------------
year 
       n  missing distinct 
   45638        0        2 
                      
Value       2021  2022
Frequency  23680 21958
Proportion 0.519 0.481
--------------------------------------------------------------------------------
stage 
       n  missing distinct 
   39799     5839       21 

lowest : 1  10 11 12 13, highest: 5  6  7  8  9 
--------------------------------------------------------------------------------
race_type 
       n  missing distinct 
   45638        0        2 
                                    
Value      one-day race   stage race
Frequency          5839        39799
Proportion        0.128        0.872
--------------------------------------------------------------------------------
date 
         n    missing   distinct       Info       Mean        Gmd        .05 
     45638          0        255          1 2021-11-25      217.2 2021-03-11 
       .10        .25        .50        .75        .90        .95 
2021-03-25 2021-05-30 2021-09-04 2022-05-25 2022-08-01 2022-08-28 

lowest : 2021-02-21 2021-02-22 2021-02-23 2021-02-24 2021-02-25
highest: 2022-09-08 2022-09-09 2022-09-10 2022-09-11 2022-10-08
--------------------------------------------------------------------------------
start_time 
       n  missing distinct 
   45638        0      133 

lowest : 10:00              10:05              10:10              10:15              10:15  (11:15 CET)
highest: 16:30              16:45              17:02              17:26              17:44             
--------------------------------------------------------------------------------
rider 
       n  missing distinct 
   45638        0     1027 

lowest : AASVOLD Kristian         ABERASTURI Jon           ABRAHAMSEN Jonas         ACKERMANN Pascal         ADRIÀ Roger             
highest: ZINGLE Axel              ZOCCARATO Samuele        ZUKOWSKY Nickolas        ZURITA Ricardo Alejandro ZWIEHOFF Ben            
--------------------------------------------------------------------------------
age 
       n  missing distinct     Info     Mean      Gmd      .05      .10 
   45638        0       25    0.996    28.23    5.095       22       23 
     .25      .50      .75      .90      .95 
      25       28       31       35       36 

lowest : 18 19 20 21 22, highest: 38 39 40 41 42
--------------------------------------------------------------------------------
bib 
       n  missing distinct     Info     Mean      Gmd      .05      .10 
   45638        0      200        1    112.9    76.53       11       22 
     .25      .50      .75      .90      .95 
      55      113      171      204      216 

lowest :   1   2   3   4   5, highest: 244 245 246 247 248
--------------------------------------------------------------------------------
team 
       n  missing distinct 
   45638        0       55 

lowest : AG2R Citroën Team             Alpecin-Deceuninck            Alpecin-Fenix                 Androni Giocattoli - Sidermec Astana - Premier Tech        
highest: TotalEnergies                 Trek - Segafredo              UAE Team Emirates             Uno-X Pro Cycling Team        Vini Zabù                    
--------------------------------------------------------------------------------
rnk 
       n  missing distinct     Info     Mean      Gmd      .05      .10 
   42884     2754      184        1    75.64    52.05        8       15 
     .25      .50      .75      .90      .95 
      37       74      112      138      151 

lowest :   1   2   3   4   5, highest: 180 181 182 183 184
--------------------------------------------------------------------------------
uci 
       n  missing distinct     Info     Mean      Gmd      .05      .10 
    3123    42515       48    0.994    41.22    54.28        3        4 
     .25      .50      .75      .90      .95 
       8       16       40      100      175 

lowest :   1   2   3   4   5, highest: 300 320 325 400 500
--------------------------------------------------------------------------------
pnt 
       n  missing distinct     Info     Mean      Gmd      .05      .10 
    7308    38330       45    0.922    16.59    20.04        2        3 
     .25      .50      .75      .90      .95 
       5        5       17       46       70 

lowest :   1   2   3   4   5, highest: 120 150 200 225 275
--------------------------------------------------------------------------------
gc 
       n  missing distinct     Info     Mean      Gmd      .05      .10 
   38780     6858      184        1    77.19    52.64        8       16 
     .25      .50      .75      .90      .95 
      38       76      114      140      152 

lowest :   1   2   3   4   5, highest: 180 181 182 183 184
--------------------------------------------------------------------------------
time 
       n  missing distinct 
   45638        0     2641 

lowest : -        -1″      -2″      -3″      0:000:00
highest: 9:559:55 9:569:56 9:579:57 9:589:58 9:599:59
--------------------------------------------------------------------------------
bonus_secs 
       n  missing distinct     Info     Mean      Gmd      .05      .10 
    1210    44428       20    0.979    5.058    3.754        1        1 
     .25      .50      .75      .90      .95 
       2        4        6       10       11 

lowest :  1  2  3  4  5, highest: 16 18 19 20 22
                                                                            
Value          1     2     3     4     5     6     7     8     9    10    11
Frequency    160   169   150   209    26   219    22    11    13   166    11
Proportion 0.132 0.140 0.124 0.173 0.021 0.181 0.018 0.009 0.011 0.137 0.009
                                                                
Value         12    13    14    15    16    18    19    20    22
Frequency     16    23     3     1     1     6     2     1     1
Proportion 0.013 0.019 0.002 0.001 0.001 0.005 0.002 0.001 0.001
--------------------------------------------------------------------------------
timelag 
       n  missing distinct     Info     Mean      Gmd      .05      .10 
   28517    17121     3448        1    910.4     1035       11       29 
     .25      .50      .75      .90      .95 
      92      541     1484     2512     2969 

lowest :    0    1    2    3    4, highest: 3594 3595 3596 3597 3599
--------------------------------------------------------------------------------
avg_km_h 
       n  missing distinct     Info     Mean      Gmd      .05      .10 
    4453    41185     2692        1    45.57    5.923    34.62    39.20 
     .25      .50      .75      .90      .95 
   43.05    46.45    49.36    51.43    52.68 

lowest : 22.275 22.755 22.764 23.003 23.012, highest: 56.807 56.912 57.333 57.654 58.748
--------------------------------------------------------------------------------
avg_speed_winner 
       n  missing distinct 
   45638        0      289 

lowest : 28.23 km/h  32.413 km/h 32.596 km/h 33.534 km/h 34.219 km/h
highest: 54.89 km/h  55.575 km/h 55.676 km/h 55.98 km/h  58.748 km/h
--------------------------------------------------------------------------------
race_category 
             n        missing       distinct          value 
         45638              0              1 ME - Men Elite 
                         
Value      ME - Men Elite
Frequency           45638
Proportion              1
--------------------------------------------------------------------------------
distance 
       n  missing distinct 
   45638        0      242 

lowest : 10.1 km  10.9 km  108.4 km 11.1 km  11.8 km 
highest: 8.6 km   9 km     9.2 km   92.7 km  96.7 km 
--------------------------------------------------------------------------------
points_scale 
       n  missing distinct 
   45638        0        5 

lowest : 1.WT.A     1.WT.B     2.WT.Stage GT.A.Stage GT.B.Stage
highest: 1.WT.A     1.WT.B     2.WT.Stage GT.A.Stage GT.B.Stage
                                                                 
Value          1.WT.A     1.WT.B 2.WT.Stage GT.A.Stage GT.B.Stage
Frequency        1726       4113      19327       6794      13678
Proportion      0.038      0.090      0.423      0.149      0.300
--------------------------------------------------------------------------------
uci_scale 
       n  missing distinct 
   45638        0        8 

lowest : UCI.WR.C1                  UCI.WR.C1.Stage - TM2022   UCI.WR.C2                  UCI.WR.C2.Stage - TM2022   UCI.WR.C3                 
highest: UCI.WR.C2.Stage - TM2022   UCI.WR.C3                  UCI.WR.C3.Stage - TM2022   UCI.WR.GT.A.Stage - TM2022 UCI.WR.GT.B.Stage - TM2022
--------------------------------------------------------------------------------
profile_score 
       n  missing distinct 
   45638        0      185 

lowest : 0   1   10  100 101, highest: 93  94  95  97  98 
--------------------------------------------------------------------------------
vert_meters 
       n  missing distinct 
   45638        0      277 

lowest : 100  102  1032 1049 1057, highest: 926  94   96   966  977 
--------------------------------------------------------------------------------
departure 
       n  missing distinct 
   45638        0      260 

lowest : 's-Hertogenbosch Aalter           Abbiategrasso    Aesch            Aigle           
highest: Ypres            Zabrze           Zalla            Zamość           Zamudio         
--------------------------------------------------------------------------------
arrival 
       n  missing distinct 
   45638        0      264 

lowest : Abu Dhabi Breakwater    Aesch                   Ajman                   Al Hudayriat Island     Al Marjan Island       
highest: Waregem                 Wevelgem                Zamość                  Zamudio                 Zinal (Val d'Anniviers)
--------------------------------------------------------------------------------
race_ranking 
       n  missing distinct 
   45638        0       31 

lowest : 1  10 11 12 13, highest: 6  64 7  8  9 
--------------------------------------------------------------------------------
startlist_quality_score 
       n  missing distinct 
   45638        0       57 

lowest : 1013 1019 1043 1061 1068, highest: 885  936  970  974  984 
--------------------------------------------------------------------------------
won_how 
       n  missing distinct 
   45638        0       85 

lowest : ? km solo             0.2 km solo           0.3 km solo           0.4 km solo           0.5 km solo          
highest: Other                 Sprint a deux         Sprint of large group Sprint of small group Time Trial           
--------------------------------------------------------------------------------
race_level 
       n  missing distinct 
   45638        0        3 
                                           
Value      Grand Tour   Momument      Other
Frequency       20472       1726      23440
Proportion      0.449      0.038      0.514
--------------------------------------------------------------------------------</code></pre>
</div>
</div>
</section>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>